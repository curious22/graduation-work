## /api/search

Конечная точка для поиска по имеющимся медикаментам в БД.
Все параметры опциональны (не обязательны). Их порядок не имеет значения.

Поддерживается пагинация и ограничеения количества возвращаемых результатов.

### Запрос без параметров:

`GET /api/search`

Описание: возвращает все медикаменты из БД. По умолчанию лимит - 20 записей.

Варианты ответов: 

> `HTTP 200 OK` Успешная обработка запроса.
```json
{
  "page": 0, // номер текущей страницы
  "pages": 380, // общее кол-во страниц пагинации
  "count": 20, // количесвто возвращенных товаров
  "results": [ // список товаров
    // 20 items
  ]
}
```

> `HTTP 500 Connection to DB doesn't exist` Внутренняя ошибка сервера, 
отсутствует подключение к БД.

### Пример пагинации по страницам

`GET /api/search?page=<numb>`

> Пример `GET /api/search?page=4`

Варианты ответов такие же, 
что и для запросов без параметров, но список товаров
будет разным (переход по страницам).

> `HTTP 200 OK` Успешная обработка запроса.

```json
{
  "page": 4, // номер текущей страницы
  "pages": 380,
  "count": 20,
  "results": [
    // 20 items
  ]
}
```

> `HTTP 500 Connection to DB doesn't exist` Внутренняя ошибка сервера, 
отсутствует подключение к БД.

### Пример ограничения возвращаемых результатов

`GET /api/search?limit=<numb>`

> Пример `GET /api/search?limit=4`

Коды ответов такие же, что и в предыдущеих запросах, 
но количество страниц пагинаций меняется в соответствии
с ограничением выдачи.

> `HTTP 200 OK` Успешная обработка запроса.

```json
{
  "page": 0,
  "pages": 1903, // кол-во страниц, при выдаче 4 товароы на каждой странице
  "count": 4, // кол-во возвращенных записей
  "results": [
    // 4 items
  ]
}
```

> `HTTP 500 Connection to DB doesn't exist` Внутренняя ошибка сервера, 
отсутствует подключение к БД.

> Параметры `limit` и `page` можно комбинировать в любой последовательности
> Например запрос `HTTP GET /api/search?limit=4&page=2` 
вернет вторую страницу с 4 товарами на ней

### Поиск по названию (title)

`HTTP GET /api/search?title=<string>`

> Пример `HTTP GET /api/search?title=амизон`

Коды ответа такие же, что и в предыдущих примера.

Строка из параметра `title` разибается на отдельные слова
и идет поиск в тегах на совпадение всех слова.

`HTTP GET /api/search?title=амизон%20№10` будет искать совпадение в тегах
по `амизон` и `№10`.

## Описание полей записи

Пример записи:
```json
{
  "_id": {
    "$oid": "58779bf06c0fed305298dfb2"
  },
  "image_url": "http://www.apteka24.ua/bitrix/templates/apteka24/img/xno-image.png.pagespeed.ic.qAiagp1601.jpg",
  "tags": [
    "амизон",
    "табл.",
    "п/о",
    "0.125",
    "г",
    "№10",
    "(10х1)"
  ],
  "category": "Противовирусные средства",
  "price_data": [
    {
      "resource": "apteka24.ua",
      "updating_date": "11:38:56 12-01-17",
      "url": "http://www.apteka24.ua/amizon-tabl-p-o-0-125g-n10-10kh1/",
      "availability": true,
      "currency": "UAH",
      "price": 25.31,
      "manufacturer": "ПАТ\"Фармак\", Україна"
    }
  ],
  "title": "Амизон табл. п/о 0.125г N10 (10х1)"
}
```

Отображать можно следующие поля:
- title 
- category 
- price_data - список (может быть несколько товаров):
    - resource - название интернет-магазина
    - url - ссылка на товар в магазине
    - availability - доступность
    - currency - вальюта всегда в гривне, можно не отображать
    - price - цена, если встречается 0, но `availability` == true - товар не доступен
    - manufacturer - производитель
- image_url - изображение товара

Остальные поля присутствуют как мета информация 
для поиска и агрегации.
